package test;
import static org.junit.jupiter.api.Assertions.assertArrayEquals;
import static org.junit.jupiter.api.Assertions.assertEquals;

import java.time.LocalDate;
import java.util.Base64;
import java.util.HashSet;
import java.util.Set;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import excepciones.CategoriaEventoVacia;
import excepciones.ContrasenaInvalidaException;
import excepciones.EdicionRepetidaException;
import excepciones.EventoRepetido;
import excepciones.UsuarioCorreoRepetidoException;
import excepciones.UsuarioNoExisteException;
import excepciones.UsuarioRepetidoException;
import logica.ManejadorEvento;
import logica.ManejadorUsuario;
import presentacion.Principal;
import logica.Fabrica;
import logica.IControladorEvento;
import logica.IControladorUsuario;

public class TestImagenes {
	
	@BeforeEach @AfterEach
	public void reiniciarSingletons() {
		ManejadorEvento.getInstancia().reiniciarSingleton();
		ManejadorUsuario.getInstancia().reiniciarSingleton();
		Principal.cargarPropiedades();
	}
	
	@Test
	public void imagenUsuario() throws UsuarioRepetidoException, UsuarioCorreoRepetidoException, ContrasenaInvalidaException, UsuarioNoExisteException {
		IControladorUsuario ctrUs = Fabrica.getInstance().getIControladorUsuario();
		
		ctrUs.registrarUsuario("nick1", "nom1", "nom@mail.com", "contr", "contr", null, true, "apell1", LocalDate.now(), null, null);
		
		assertEquals(ctrUs.getImagenUsuario("nick1").length, 0);
		
		String img_b64 = "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";
		byte[] img_bytes = Base64.getDecoder().decode(img_b64);
		
		ctrUs.setImagenUsuario("nick1", img_bytes);
		
		assertArrayEquals(ctrUs.getImagenUsuario("nick1"), img_bytes);
		
		ctrUs.setImagenUsuario("nick1", null);
		
		assertEquals(ctrUs.getImagenUsuario("nick1").length, 0);
	}
	
	@Test
	public void imagenEvento() throws EventoRepetido, CategoriaEventoVacia {
		IControladorEvento ctrEv = Fabrica.getInstance().getIControladorEvento();
		
		Set<String> cats = new HashSet<>();
		cats.add("categoría");
		ctrEv.altaEvento("ev1", "desc", LocalDate.now(), "sig", cats, null);
		
		assertEquals(ctrEv.getImagenEvento("ev1").length, 0);
		
		String img_b64 = "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";
		byte[] img_bytes = Base64.getDecoder().decode(img_b64);
		ctrEv.setImagenEvento("ev1", img_bytes);
		
		assertArrayEquals(ctrEv.getImagenEvento("ev1"), img_bytes);
		
		ctrEv.setImagenEvento("ev1", null);
		
		assertEquals(ctrEv.getImagenEvento("ev1").length, 0);

	}
	
	@Test
	public void imagenEdicion() throws EventoRepetido, CategoriaEventoVacia, EdicionRepetidaException, UsuarioRepetidoException, UsuarioCorreoRepetidoException, ContrasenaInvalidaException {
		
		IControladorUsuario ctrUs = Fabrica.getInstance().getIControladorUsuario();
		
		ctrUs.registrarUsuario("org1", "nom1", "nom@mail.com", "contr", "contr", null, false, "apell1", LocalDate.now(), "desc", "web");
		
		
		IControladorEvento ctrEv = Fabrica.getInstance().getIControladorEvento();
		
		Set<String> cats = new HashSet<>();
		cats.add("categoría");
		ctrEv.altaEvento("ev1", "desc", LocalDate.now(), "sig", cats, null);
		ctrEv.altaEdicionEvento("ev1", "org1", "ed1", "ed", "pais", "ciu", LocalDate.now(), LocalDate.now(), LocalDate.now(), "ingresada", null, null);
		
		assertEquals(ctrEv.getImagenEdicion("ev1", "ed1").length, 0);
		
		String img_b64 = "/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMREhASEBIWFhIWGBgVFRUWFhcVGBcVFxUXGBcVFxUYHSggGBolGxcXITEhJSkrLi4uFx8zODMsNygtLi0BCgoKDg0OGxAQGisdHSAtLS0tLS0tLS0tLS0tLS0rLS0tLSstLS0tLS0tLS0tLS0tMC0tLS0tLS0tLS0tKy0tLf/AABEIAPEA0QMBIgACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAABwMEBQYIAQL/xABGEAABAwIBBwgGBwcDBQEAAAABAAIDBBEhBQYSMUFRYQcTIjJxgZGhQlJykrHBFCMzYoKisjRjo8LR4fAVQ5NTc4OzwyT/xAAZAQEAAwEBAAAAAAAAAAAAAAAAAQIDBAX/xAAlEQEBAAICAgEEAgMAAAAAAAAAAQIRAzESITIEE0FRInEjM4H/2gAMAwEAAhEDEQA/AJxREQEREBERARFq+eeecVA3RFpKhwu2MHUNjnnYOGs+YJk2z2UcoRU7DJPI2Ng9Jxt3DeeAUfZb5V2NJbRwl/7yW7W9oYOkR2lqjjLWWZ6uTnKiQudsGprRuY3UB/hurBV22x45+W1VfKJlF5wnEY3MjZbxeHHzVGPP3KLdVU49scR+LFraKF/Gfps0uf8AlF2H0oj2Y4h56F1iKrLdTKSZKmZ19hkfbubewVgiGo9JVzT5Snj+znlZ7Ej2/Aq1REtqyZyhV8JF5RK31ZWh35hZ1+0lb7m9ym005DKgfR3naTpRk+36P4gBxUMIp2rcJXUDXAgEG4OII1EL1QNmfnrNQODDeSmvjGTi3eYyeqeGo8Nam7JeUoqmJk0Dg5jhgR5gjYRtCmVhljcV2iIpVEREBERAREQEREBERARFjM48ssoqeSeTHRFmt2ueeq0dp8BcoMNn7ne2gj0I7OqXjoNOIaNXOOG7cNp7CoOqah0j3SSOLnuN3OJuSTtKrZTyhJUSyTTO0pHm5OwbmgbABgBwVqqWunHHxgiIiwiIgIiICIiAiIgLZcxs6nUE3SJNO8gSt122c40esPMdy1trSdQQi2tCzcdOwyh7WuaQWuAIIxBBFwQV9qNeSHOLSa6ikOLAXwk+pfpM7ibjgTuUlK7lymroRERAiIgIiICIiAiIgKFeVbL3P1P0dh+qgwO4ynrHuHR95SznDlMUtNPOfQYSBvdqaO9xA71zjI8uJc43c4kuO8k3J8VFa8U/KvRxA3J2K4nhDhx2FWMUpbqV0ysG0KjoWbm2NivFXqpA61lmM2s0563pDoQ3sZHDXvDG+kfLim0MAil2g5P6OMDTa6V297iB7rbfNX7sz6Ei30ZncXDzBUeUT4oTRSxXcnVI/wCzMkR4O0x4Ox81WyfmBRx9drpTve7D3W2HjdPKHjUQopvOatERb6LF7tj4jFYXK/J3TyAmnLon7BcvYe0HEdxTyh4oqXrGkmwV3lbJktNIYpm6LhiNocNjmnaFSpZQ0m6lC7hhDRx2lfNWwFpO0L4fWDYCfJW0sxdr1bkSr5Iyi6mminZ1o3B1t49JveLjvXSFHUtljjkYbse0Pad4cLj4rmRTRyRZU52jMLj0oHFo9h3Sb56Q/CrRjyz1tvKIiswEREBERAREQEREEd8s2UdGCCAHGV5e72Yxq95zT3KIlufK1Xc5XlgOEUbGW+87pnyc3wWmKtdOE1iIiKFmezNyB9Nn0XX5llnSEbRsYDvPwBUzwxNY1rWANa0WAAsABqAC17k/yZzFHGSOnL9a78XUHu28StkWeV20kERFVIiIgIiIMHndkFtZAW2HOtu6J253qk7jq8DsUKPaQSCLEGxB1gjWCuh1E3KVkjmakStHQmGl2SDB/jge8q+NVyjUERFdQW78kWUObrTEThNGW2++zpt/KH+K0hZLNus5mrpZfVlZf2S4B35SUiMpuOj0RFdyiIiAiIgIiICIrTK9XzME8p/243v91pPyQc95y1fPVdVLsdK+3shxDfygLGrxowC9VHWK5ybRmeWKFuuRzWdlzie4XPcrZb1yW5I05X1Th0Y7sZxe4dIjsabfj4KLUxJjGBoDQLAAADcBgF9IiyaCIiAiIgIiIC1zP/JvP0cth0ovrW/h635S7yWxrx7QQQRcEWI3g61JXPCK5ynRmGaaI/7b3M7QDYHvFirZasheOGBXqIOlsk1XPQQS/wDUjY/3mh3zV2td5PZ9PJ1GdzND/jcWfyrYldy3sRERAiIgIiIC1rlHqebydVn1mtj/AOR7WHyJWyrTeVGF8tNBTxC75p2M4ANY95ceA0QSovS2E3lEIIpZyVmVSxNGmznX7XP1X4M1AeJ4rRM9slimqnBjdGN4D2AahfAgd4PiFnMpXZcLJtaZv5ClrJAyIWaOvIR0WDed53Db4lTXkvJ7KeKOGIWYwWG8nWXHiTcntWt8l8VqIn1pXnwDW/yrblXKkjTX511cznChoXuaCRpy9AXBscCQB2aV14csZWj6UlDG9u0RuGl3APcfIrb6mdsbHPkcGsaC5znGwa0C5JOwWWiwcr2TXTc1pStaTYTOjtGePW0wOJaEn9Itk7rYM3c6oqtzotF8c7Rd0TxiACASDwJGuxx1LPKmxjSdMBtyANMAXLdY6W0Kooq8ERFALCZx5zRUeg14c+V/UjYMTjbXsF+08Fm18OiaSHFo0heziBcX12OxSNPGWsqy9KKgYxuznXWd4Oe0+S8OdVZT2NbQODNr4TpW7gXDxcFbV3K5k2KYw6UrwDomVjA6MEGxxLg5w4hpB2XW7UVYyaNksLw+N4DmubqIO1Tf6Ull6qJ+Uml0KwvAIErGSarY20CO3ojxWrKSOVul6FLLuc+M/iAcP0O8VG6vOkURX2Q4w+op2uALXSMBBxBBcLghSVlbMqlmaebZzT9jmXtfizUR2WPFRctLY429MvySzaWTmN9SSRvi7T/nW5LQ+SWB8MVZTyCz457ke1GyxHAhtx2rfFpOnHnNZUREUqiIiAiIgLE5baC6I7QHeejj8VllrmV6wfSxDfHmecA4CQtPxCpn8WvB/silLpYaNu9aVyk0xfFFIW2dG6xP3X/3DfFbwrDL9B9Ip5orYuadH2hi3zAWE9V6WXvHWltydstQQcTIfGV62RYfNCjfDR08crdF4B0m3BtdxNsMNqzCte3POmscpmT5ajJtXFTgmQta4NGtwY9rnNFtZLQcNupcwMhc5wY1pLydENAJcXXtohuu99i7GVAUUQfzgiZznr6DdL3rXVsctM8+Pyu2PzQopIKGjhm+0jiY1w12IaOj3au5ZdEVGkmhEREisst075KeojiOjI+KRrDue5hDT4kK9RBx1VUz4nujkaWvabOa4WII2ELpPkkydLT5MgZO0tc4veGOwLWPddoI2X61vvLa5aKJzg90THPGp5Y0uHY4i4VdXyz3GWHF43bVuUqDSoZD6j43j3tD4PKiBThnhHpUNWN0Tne6NL5KD1OK2TIZvA/Sqa2vnGfqCmiLSx0rdyh3NJt62lH3wfAE/JTMq59tuLqqmQ2BtTMdskUf8J7wT4SNHcFsK0ygrQMqQxX100pI4uljI8o3Lc1ph8XFz/OiIiuxEREBERAUU5/ZX+jZWp5PRbCxrwNrHPk0u8XB7WhSsoM5VZL5RlHqsjb+QO/mUZdNOL5JMikD2tc0gtcAQRiCDiCF9KK80s7XUtopbugJwti6MnWW727x3jcZNoqyOZgfE8PYdoPkdx4Fc9mno45SsjGbgL6VGA6wqyM7NURERAiIgIreoke0gtbdu3fdfMMsjnDo6Ldt9aLeN1tdIiIqIiILDL7b0tUN8Mo/huUDBTxnC+1LVndDKf4blA6vipkz+YcWlXQcNN3hG4fNS1NK1jXPeQGtBLidQAxJKivMKojhnkmme1jGRHEna5zQABrJ14Be5252Oq/q47tgB1HrPI1F24bm954RlN1fHKY4r/NnLRmyzDNqa9zmNB2MMTmsHwPaVNi5syFUc3U00nqyxuPYHtJ8l0mtcXJy97ERFZkIiICIiAoC5R33ylV9rB4RMCn1c9Z8v0soVp/eEe6APkorXi7YNV6OulhOlBI5jt7Tr7RqI7VQRVbNtyJykTtfG2pbG6MuAe8Atc1pNi42NjbXqGpS2CuapBiVL3JlnKJ4RTSu+uiFm31viGAPEtwB7jtKplFsct9t3REVFxEVGpa/AsOI2b0TJuqyKyFcR12EdiGuv1GEn/NybW+3kvUVtTMfcuefw7FcorZoRERDC56TaFDVk7Yy33yGfzKEVv8Ayl5yBx+hRG4BDp3DVcG7YxxBxPYBvWgLTHpS1RmFy0KsqTcXE7sFVVlXhXTOTannYYZBqexr/eaD81zOp+5PKrnMnUh2tYYz/wCNxZ8AFMZcvTY0RFZiIiICIiAucs6X3ra0/v5f/Y5dGrmrLT71NSd80p/iOUVrxdrNERVbLWfrFe0lS+J7JI3Fr2m7XDWD/mxKjWqSKpqzMz0jrQI5bMqQMW6myW9KO/6dY4jFbYuaWmxBBsRiCMCCNRB2FSBmvykPj0Y60GRmoSjrgffHpjjr7VS4/peZ/tKyK1ydlGKoYJIJGvYdrTe3AjWDwKulRoIiICIrDLOWIaSPnKh4a29htLjYnRa0Yk4HwQX6j7PjP1sQfT0bg6XEPlGLY94YfSfx1Dt1a3nXn9NVaUcF4YDgcfrHj7zh1R90d5K04K8x/bPLL9Lmn2k6ydfzVRxsCV4xtgAqVS/YrofVOML71VXzGMAvpAUw8jVXpUs0V8Y5bj2XtBHmHKHlIHI1W6NVPEdUkekPajd/RzvBTFM5/FMKIis5xERAREQFzFUP0nvdvc4+JJXTNS/RY87mk+AXMLTgq1txfl6iIoarao1qkqk56RVNFaIiy+bGbs1fNzUAAsLveeqxu87zuG3xII3psnJW8h1WQbG0X/1UkxZQI6wvx1FYTJmZzcm6WjK6QyhuldobYsvqtsOn5K+WOfrJ28Mxy45WWZXMO0jtH9EfXMG0nsH9ViUVdr/axXkuUHHqi3mVovKfc00RNz9cBfjzci3elpC/E4N37+xfOcGazK+JkDnmNrHiS7QCSQ1zbY+3fuVsZbWfLljjjZEAr7hbcrP55ZozZOe0PIfE/wCzlAsCRra4ei7ht2bbYKOQNHFbOSXau99grNxuvXOJ1rxC1et2L1eN1BeosLNZmV/MV1LITYaYa72X9A/qv3LCp2IX26hRY7N3KH0mlp5tr2NJ9q1nD3gVkVdyCIiAiIgxuctTzVJVP9WKQjt0Dbzsubwpo5XcqiKkbAD053AW+4whzj46I71DCrW/FPQiIVDRZyHEr5RXdLk2STU2w3uwH91MlvSlsnazJXQvJ3kEUdFECLSyASynbpOGDfwtsPHeonyDm0x80LJDpaT2AgYCxcL8Sp+Wnhce2OecvqLDLNKXsuOs3EcRtH+blra3JzgBcmwWLkdHpdAWvrNgMVlyce/cb/TfUeE8L/xh4qV7tQsN5wV9BQtbi7E+XgrtFhp1ZcloryjjsLnbq7FZtkaCNK9uCyUbw4Xabhb8eH5ri5uWfGMdnNkZlbTS07/SHRPqvGLHDsPldc1TROY5zHizmktcNzmmxHiF1QoN5Qc3rV1S6IjpOD9E4YuaHGx7SVpcbl0y485O2joqk8DmGz2kHj8jtVNZuhdxHAL7VKnOCqosIiIJf5G8p6dPNTk4xP0mj7kmP6g7xUhKCeTLKXMV8QJ6MoMTu04t/M0DvU7K0c/JNUREUqCEosPnfUmKiqnNNn825rMbdJwIFuNyghTPbLhrauWQH6tv1cQ+40nHvN3d6wKylPkc+mbcBr8Vfw0EbdTQTvOPxV8eHK9+mt5ccfUYGGnc/qtJ47PFX0WRieu63AYnxWYXq2x4MZ37ZZc2V69LSmydHH1Wi+84nz1K7RFtJJ0yt32yma37XTe3fwBKltzrAk6goizbNqqn4vA97D5qTaqcua1ovf0rcMPiseWbpvS3qqgvPDYPmqTTiF9cy71XeBXwRbWq6mtK797XaLxpwXq4HrSraU4lfUExYbjvG9fBxK+hC71T4Fd0mpp5WV3lazUUgcARqKjHPsf/ALJOLWfpt8lv1FKWaQcCBa+ItiFHuebr1T76w1l+0tBPxVuKayTtgXsBFiARuOKx9RkWJ2oFp+6cPArJItrjL3EzKzpgv9Ec2+i4EccCraWke3W09useIWzIsr9PjevTSc2U7ami2eWBrus0Hu+as5skMPVJafELK/T5Tr21nPje2Ip5zG9kjesxzXjtaQ4eYXTNPKHta8anAOHYRcLmqqo3R9YYbxq/sp/zMlL6CiJ18zGD3NA+Sy1ZdU5LLJYzSIilktcpVzII3yyGzWjvJ2AcScFEuW8syVb9OQ9EdRg6rRw3neVsPKRlIukZTg9Fg03cXu1A9jf1LTV1cOGptTKiIi2UEREBERBWo5ubkjf6rmu8HAqZoogC5w9LFQkpezarOepYH7dENd7Teifh5rHmnVTGTQhEXOstKuICxAtvsvmliuTfUFdTNu0hfNK2zRxxWdx/k3nJ/j0qtAGoWREWjBTnhDwAdhBUR5xVHOVVQ/YXkDsb0R5BSrlasEMMsp9FpI7fRHjZQ0TvW/DO6iiIi3VEREBERB44XwOIUm8n+U2SU7YANF0IDbb2ei4fA/3UZrLZqV3M1ULr4OdzbvZfhj2Gx7lnyYeUWl0l9ERcbRDOX6jnKmoedsjgOxp0W+QCsF9TP0nOO8k+JXyu+dMhERSgREQEREBbvycZQ+1pyf3jPIOHwPitIVzkytdBLHKzWw3tvGojvFwq54+U0lM6KlSVLZWMkYbtcA4Hgfmqq41hAERARFRrqtsMb5JDZrRc/wBBxJw71I1HlGylZsdO04u6b/ZHVHebn8K0NXOU6508skr9bje24bGjsFgrZdeGPjNKiIisgREQEREBNIjEaxiO1F4gmH/Wm7kUaf6ud6Lm+0v5LCt+0k9t36iqKIuidK0REUoEREBERAREQSfmF+xR+1J+srYURcmfyq0ERFRItX5Rf2Vv/cb8HIivh8oio3REXWqIiICIiAiIgLwr1EG6IiLlXf/Z";
		byte[] img_bytes = Base64.getDecoder().decode(img_b64);
		
		ctrEv.setImagenEdicion("ev1", "ed1", img_bytes);
		
		assertArrayEquals(ctrEv.getImagenEdicion("ev1", "ed1"), img_bytes);
	}
	
}
